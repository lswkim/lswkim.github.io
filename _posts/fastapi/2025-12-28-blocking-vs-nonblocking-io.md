---
title: "[FastAPI ê¸°ì´ˆê°œë… 3] ë¸”ë¡œí‚¹(Blocking) vs ë…¼ë¸”ë¡œí‚¹(Non-blocking) I/O"
date: 2025-12-28 10:00:00 +0900
categories: [Tech, FastAPI]
tags: [python, blocking, nonblocking, io, asyncio, fastapi]
mermaid: true
---

> **ğŸ“š FastAPI ì‹œë¦¬ì¦ˆ - Part 1. ê¸°ì´ˆ ê°œë…**
>
> 1. [í”„ë¡œì„¸ìŠ¤ vs ìŠ¤ë ˆë“œ vs ì½”ë£¨í‹´](/posts/process-thread-coroutine/)
> 2. [ë™ì‹œì„± vs ë³‘ë ¬ì„±](/posts/concurrency-vs-parallelism/)
> 3. ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ I/O â† í˜„ì¬ ê¸€
> 4. [I/O ë©€í‹°í”Œë ‰ì‹±](/posts/io-multiplexing/)

---

# 3. ë¸”ë¡œí‚¹(Blocking) vs ë…¼ë¸”ë¡œí‚¹(Non-blocking) I/O

## ì™œ ì´ ê°œë…ì´ ì¤‘ìš”í•œê°€?

ì•ì„œ ë°°ìš´ ë‚´ìš©:

- ë™ì‹œì„±ì€ I/O ë°”ìš´ë“œ ì‘ì—…ì— íš¨ê³¼ì ì´ë‹¤
- I/O ëŒ€ê¸° ì‹œê°„ì— ë‹¤ë¥¸ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤

**ê·¼ë³¸ì ì¸ ì§ˆë¬¸:** ì™œ I/O ëŒ€ê¸° ì‹œê°„ì— ë‹¤ë¥¸ ì‘ì—…ì´ ê°€ëŠ¥í•œ ê±¸ê¹Œ?

ì´ ì§ˆë¬¸ì— ë‹µí•˜ë ¤ë©´ **ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹**ì„ ì´í•´í•´ì•¼ í•œë‹¤.

---

## í•µì‹¬ ì •ì˜

| êµ¬ë¶„ | ì •ì˜ | í˜¸ì¶œ í›„ ë™ì‘ |
|:---:|:---|:---|
| **ë¸”ë¡œí‚¹ (Blocking)** | ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ í˜¸ì¶œìê°€ ë©ˆì¶¤ | ê¸°ë‹¤ë¦¼ (ë‹¤ë¥¸ ì¼ ëª»í•¨) |
| **ë…¼ë¸”ë¡œí‚¹ (Non-blocking)** | ì‘ì—… ì™„ë£Œ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì¦‰ì‹œ ë°˜í™˜ | ë°”ë¡œ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰ |

---

## ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°: ì‹ë‹¹ ì£¼ë¬¸

### ë¸”ë¡œí‚¹ ë°©ì‹

```mermaid
sequenceDiagram
    participant ë‚˜
    participant ì§ì›
    ë‚˜->>ì§ì›: ê¹€ì¹˜ì°Œê°œ ì£¼ì„¸ìš”
    Note over ë‚˜: ì¹´ìš´í„° ì•ì—ì„œ ëŒ€ê¸°...
    Note over ë‚˜: (5ë¶„ ê²½ê³¼)
    ì§ì›-->>ë‚˜: ê¹€ì¹˜ì°Œê°œ ë‚˜ì™”ìŠµë‹ˆë‹¤
    Note over ë‚˜: ìŒì‹ ë°›ê³  ìë¦¬ë¡œ ì´ë™
```

- ìŒì‹ ë‚˜ì˜¬ ë•Œê¹Œì§€ **ì•„ë¬´ê²ƒë„ ëª»í•¨**
- ì¹´ìš´í„° ì•ì— **ë¶™ì¡í˜€ ìˆìŒ**

### ë…¼ë¸”ë¡œí‚¹ ë°©ì‹

```mermaid
sequenceDiagram
    participant ë‚˜
    participant ì§ì›
    ë‚˜->>ì§ì›: ê¹€ì¹˜ì°Œê°œ ì£¼ì„¸ìš”
    ì§ì›-->>ë‚˜: ì§„ë™ë²¨ ë“œë¦´ê²Œìš” (ë²ˆí˜¸ 42ë²ˆ)
    Note over ë‚˜: ìë¦¬ì—ì„œ ë‹¤ë¥¸ ì¼<br/>(í•¸ë“œí°, ëŒ€í™” ë“±)
    ì§ì›->>ë‚˜: (5ë¶„ í›„) ì§„ë™ë²¨ ìš¸ë¦¼
    Note over ë‚˜: ìŒì‹ ë°›ìœ¼ëŸ¬ ê°
```

- ì£¼ë¬¸ í›„ **ì¦‰ì‹œ ë°˜í™˜** (ì§„ë™ë²¨ ë°›ìŒ)
- ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ **ë‹¤ë¥¸ ì¼ ê°€ëŠ¥**

---

## ì½”ë“œë¡œ ë³´ëŠ” ì°¨ì´

### ë¸”ë¡œí‚¹ I/O

```python
import socket

# ë¸”ë¡œí‚¹ ì†Œì¼“ (ê¸°ë³¸ê°’)
sock = socket.socket()
sock.connect(('example.com', 80))

sock.send(b'GET / HTTP/1.1\r\nHost: example.com\r\n\r\n')

# â˜… ì—¬ê¸°ì„œ ë©ˆì¶¤ - ë°ì´í„° ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸° â˜…
data = sock.recv(1024)  # ë¸”ë¡œí‚¹!

print(data)  # ë°ì´í„° ë°›ì€ í›„ì—ì•¼ ì‹¤í–‰ë¨

```

```mermaid
gantt
    title ë¸”ë¡œí‚¹ I/O - ì‹œê°„ íë¦„
    dateFormat X
    axisFormat %s
    section íë¦„
    send() :0, 1
    recv() ëŒ€ê¸° (ë¸”ë¡œí‚¹) :1, 5
    ë°ì´í„° ìˆ˜ì‹  :5, 6
    print() :6, 7
```

### ë…¼ë¸”ë¡œí‚¹ I/O

```python
import socket

# ë…¼ë¸”ë¡œí‚¹ ì†Œì¼“
sock = socket.socket()
sock.setblocking(False)  # â˜… ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œ ì„¤ì • â˜…
sock.connect(('example.com', 80))

sock.send(b'GET / HTTP/1.1\r\nHost: example.com\r\n\r\n')

# â˜… ì¦‰ì‹œ ë°˜í™˜ - ë°ì´í„° ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ â˜…
try:
    data = sock.recv(1024)  # ë…¼ë¸”ë¡œí‚¹!
    print(data)
except BlockingIOError:
    print("ì•„ì§ ë°ì´í„° ì—†ìŒ, ë‚˜ì¤‘ì— ë‹¤ì‹œ í™•ì¸")
    # ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥!

```

```mermaid
gantt
    title ë…¼ë¸”ë¡œí‚¹ I/O - ì‹œê°„ íë¦„
    dateFormat X
    axisFormat %s
    section íë¦„
    send() :0, 1
    recv() ì¦‰ì‹œ ë°˜í™˜ :1, 2
    ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ :2, 4
    ë‹¤ì‹œ í™•ì¸ :4, 5
    ë°ì´í„° ìˆ˜ì‹  :5, 6
```

---

## ë¸”ë¡œí‚¹ I/Oì˜ ë¬¸ì œì 

### ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬

```python
# ë¸”ë¡œí‚¹ ë°©ì‹ì˜ ì„œë²„ (ë¬¸ì œ ìˆìŒ)
import socket

server = socket.socket()
server.bind(('0.0.0.0', 8000))
server.listen()

while True:
    client, addr = server.accept()  # ë¸”ë¡œí‚¹: ì—°ê²° ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°

    data = client.recv(1024)  # ë¸”ë¡œí‚¹: ë°ì´í„° ì˜¬ ë•Œê¹Œì§€ ëŒ€ê¸°

    # â˜… ë¬¸ì œ: ì´ í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬í•˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ ëª» ë°›ìŒ â˜…
    response = process(data)

    client.send(response)  # ë¸”ë¡œí‚¹: ì „ì†¡ ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
    client.close()

```

```mermaid
gantt
    title ë¸”ë¡œí‚¹ ì„œë²„ - ë™ì‹œ ì²˜ë¦¬ ë¶ˆê°€
    dateFormat X
    axisFormat %s
    section Client A
    ì—°ê²°+ìˆ˜ì‹ +ì²˜ë¦¬+ì‘ë‹µ :0, 4
    section Client B
    ëŒ€ê¸° :0, 4
    ì—°ê²°+ìˆ˜ì‹ +ì²˜ë¦¬+ì‘ë‹µ :4, 8
    section Client C
    ëŒ€ê¸° :0, 8
    ì—°ê²°+ìˆ˜ì‹ +ì²˜ë¦¬+ì‘ë‹µ :8, 12
```

â†’ ë™ì‹œ ì²˜ë¦¬ ë¶ˆê°€ëŠ¥!

### í•´ê²°ì±… ë¹„êµ

| í•´ê²°ì±… | ë°©ì‹ | ì¥ì  | ë‹¨ì  |
|:---:|:---|:---|:---|
| ë©€í‹° í”„ë¡œì„¸ìŠ¤ | í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ìƒˆ í”„ë¡œì„¸ìŠ¤ | ê°„ë‹¨í•¨ | ë©”ëª¨ë¦¬ ë§ì´ ì‚¬ìš© |
| ë©€í‹° ìŠ¤ë ˆë“œ | í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ìƒˆ ìŠ¤ë ˆë“œ | í”„ë¡œì„¸ìŠ¤ë³´ë‹¤ ê°€ë²¼ì›€ | ì—¬ì „íˆ ìì› ì†Œëª¨, GIL |
| **ë…¼ë¸”ë¡œí‚¹ + ì´ë²¤íŠ¸ ë£¨í”„** | ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ ì—¬ëŸ¬ ì—°ê²° ê´€ë¦¬ | ë§¤ìš° íš¨ìœ¨ì  | ì½”ë“œ ë³µì¡ë„ ì¦ê°€ |

---

## ë…¼ë¸”ë¡œí‚¹ I/Oì˜ ë™ì‘ ë°©ì‹

### ì§ì ‘ êµ¬í˜„ (Busy Waiting) - ë¹„íš¨ìœ¨ì 

```python
import socket

sock = socket.socket()
sock.setblocking(False)
# ... ì—°ê²° ...

# ë‚˜ìœ ì˜ˆ: ê³„ì† í™•ì¸ (CPU ë‚­ë¹„)
while True:
    try:
        data = sock.recv(1024)
        if data:
            break
    except BlockingIOError:
        pass  # ê³„ì† ë£¨í”„ ëŒë©° í™•ì¸ â†’ CPU 100% ì‚¬ìš©!

```

| ë¬¸ì œì  | ì„¤ëª… |
|:---:|:---|
| CPU ë‚­ë¹„ | ë°ì´í„° ì—†ì–´ë„ ê³„ì† í™•ì¸ |
| ì „ë ¥ ì†Œëª¨ | ì˜ë¯¸ ì—†ëŠ” ë£¨í”„ ë°˜ë³µ |
| ë¹„íš¨ìœ¨ | í™•ì¸í•˜ëŠ” ê²ƒ ìì²´ê°€ ì˜¤ë²„í—¤ë“œ |

### í•´ê²°ì±…: I/O ë©€í‹°í”Œë ‰ì‹±

```python
import socket
import select

sock1 = socket.socket()
sock2 = socket.socket()
# ... ì—°ê²° ì„¤ì • ...

sockets = [sock1, sock2]

# â˜… OSì—ê²Œ "ì´ ì¤‘ì— ì¤€ë¹„ëœ ê±° ìˆìœ¼ë©´ ì•Œë ¤ì¤˜" ìš”ì²­ â˜…
readable, _, _ = select.select(sockets, [], [])

# ì¤€ë¹„ëœ ì†Œì¼“ë§Œ ì²˜ë¦¬
for sock in readable:
    data = sock.recv(1024)  # ì—¬ê¸°ì„  ë°”ë¡œ ì½í˜ (ì¤€ë¹„ëìœ¼ë‹ˆê¹Œ)

```

---

## I/O ë©€í‹°í”Œë ‰ì‹± (4ë²ˆ ì£¼ì œ ë¯¸ë¦¬ë³´ê¸°)

### í•µì‹¬ ì•„ì´ë””ì–´

```mermaid
sequenceDiagram
    participant App as ì‘ìš© í”„ë¡œê·¸ë¨
    participant Kernel as OS ì»¤ë„

    App->>Kernel: ì†Œì¼“ A, B, C, D ì¤‘<br/>ì½ì„ ì¤€ë¹„ ëœ ê±° ì•Œë ¤ì¤˜
    Note over Kernel: ì†Œì¼“ A: ë°ì´í„° ì—†ìŒ<br/>ì†Œì¼“ B: ë°ì´í„° ë„ì°©!<br/>ì†Œì¼“ C: ë°ì´í„° ì—†ìŒ<br/>ì†Œì¼“ D: ë°ì´í„° ë„ì°©!
    Kernel-->>App: B, D ì¤€ë¹„ëì–´!
    Note over App: for sock in [B, D]:<br/>  data = sock.recv()
```

### OSë³„ I/O ë©€í‹°í”Œë ‰ì‹± API

| OS | API | íŠ¹ì§• |
|:---:|:---:|:---|
| ê³µí†µ | `select` | ì˜¤ë˜ë¨, ì†Œì¼“ ìˆ˜ ì œí•œ (ë³´í†µ 1024) |
| Linux | `epoll` | íš¨ìœ¨ì , ëŒ€ê·œëª¨ ì—°ê²° ì²˜ë¦¬ |
| macOS/BSD | `kqueue` | íš¨ìœ¨ì , ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ ì§€ì› |
| Windows | `IOCP` | ë¹„ë™ê¸° I/O ì™„ë£Œ í¬íŠ¸ |

---

## ë™ê¸°/ë¹„ë™ê¸° vs ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹

### ìì£¼ í˜¼ë™ë˜ëŠ” ê°œë…

| êµ¬ë¶„ | ê´€ì  | ì§ˆë¬¸ |
|:---:|:---|:---|
| **ë™ê¸°/ë¹„ë™ê¸°** | ì‘ì—… ì™„ë£Œ í†µë³´ ë°©ì‹ | "ì™„ë£Œë˜ë©´ ëˆ„ê°€ ì•Œë ¤ì£¼ë‚˜?" |
| **ë¸”ë¡œí‚¹/ë…¼ë¸”ë¡œí‚¹** | í˜¸ì¶œ ì‹œ ì œì–´ê¶Œ | "í˜¸ì¶œ í›„ ë°”ë¡œ ë°˜í™˜ë˜ë‚˜?" |

### 4ê°€ì§€ ì¡°í•©

| ì¡°í•© | ì„¤ëª… | ì˜ˆì‹œ |
|:---:|:---|:---|
| **ë™ê¸° + ë¸”ë¡œí‚¹** | ì™„ë£Œê¹Œì§€ ëŒ€ê¸°, ì§ì ‘ ê²°ê³¼ í™•ì¸ | ì¼ë°˜ì ì¸ `read()` |
| **ë™ê¸° + ë…¼ë¸”ë¡œí‚¹** | ì¦‰ì‹œ ë°˜í™˜, ì§ì ‘ ë°˜ë³µ í™•ì¸ | ë…¼ë¸”ë¡œí‚¹ ì†Œì¼“ + í´ë§ |
| **ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹** | ì¦‰ì‹œ ë°˜í™˜, ì™„ë£Œ ì‹œ ì½œë°±/ì•Œë¦¼ | `asyncio`, Node.js |
| ë¹„ë™ê¸° + ë¸”ë¡œí‚¹ | (ì¼ë°˜ì ìœ¼ë¡œ ì˜ë¯¸ ì—†ìŒ) | - |

### ì‹œê°ì  ë¹„êµ

```mermaid
gantt
    title ë™ê¸° + ë¸”ë¡œí‚¹
    dateFormat X
    axisFormat %s
    section íë¦„
    í˜¸ì¶œ :0, 1
    ëŒ€ê¸° (ë¸”ë¡œí‚¹) :1, 5
    ì™„ë£Œ :5, 6
```

```mermaid
gantt
    title ë™ê¸° + ë…¼ë¸”ë¡œí‚¹
    dateFormat X
    axisFormat %s
    section íë¦„
    í˜¸ì¶œ :0, 1
    ë°˜í™˜(ë¯¸ì™„ë£Œ) :1, 2
    ì§ì ‘ í™•ì¸ :2, 3
    ë°˜í™˜(ë¯¸ì™„ë£Œ) :3, 4
    ì§ì ‘ í™•ì¸ :4, 5
    ì™„ë£Œ :5, 6
```

```mermaid
gantt
    title ë¹„ë™ê¸° + ë…¼ë¸”ë¡œí‚¹
    dateFormat X
    axisFormat %s
    section íë¦„
    í˜¸ì¶œ+ì¦‰ì‹œë°˜í™˜ :0, 1
    ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ :1, 4
    ì½œë°±ìœ¼ë¡œ ì•Œë¦¼ :4, 5
    ê²°ê³¼ ì²˜ë¦¬ :5, 6
```

---

## Pythonì—ì„œì˜ ì ìš©

### ë¸”ë¡œí‚¹ I/O (ê¸°ë³¸)

```python
import requests

# ë¸”ë¡œí‚¹: ì‘ë‹µ ì˜¬ ë•Œê¹Œì§€ ì—¬ê¸°ì„œ ë©ˆì¶¤
response = requests.get('https://api.example.com/data')
print(response.json())  # ì‘ë‹µ ë°›ì€ í›„ ì‹¤í–‰

```

### ë…¼ë¸”ë¡œí‚¹ I/O (asyncio)

```python
import asyncio
import aiohttp

async def fetch():
    async with aiohttp.ClientSession() as session:
        # ë…¼ë¸”ë¡œí‚¹: awaitì—ì„œ ë‹¤ë¥¸ ì½”ë£¨í‹´ì—ê²Œ ì–‘ë³´
        response = await session.get('https://api.example.com/data')
        return await response.json()

async def main():
    # ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— (ë…¼ë¸”ë¡œí‚¹ì´ë¼ ê°€ëŠ¥)
    results = await asyncio.gather(
        fetch(),
        fetch(),
        fetch(),
    )
    print(results)

asyncio.run(main())

```

---

## asyncioê°€ ë…¼ë¸”ë¡œí‚¹ì„ í™œìš©í•˜ëŠ” ë°©ë²•

```mermaid
sequenceDiagram
    participant Loop as ì´ë²¤íŠ¸ ë£¨í”„
    participant A as ì½”ë£¨í‹´ A
    participant B as ì½”ë£¨í‹´ B
    participant OS as OS ì»¤ë„

    Loop->>A: 1. ì½”ë£¨í‹´ A ì‹¤í–‰
    A->>OS: 2. await session.get()<br/>(ë…¼ë¸”ë¡œí‚¹ ì†Œì¼“ ì‚¬ìš©)
    OS-->>A: ì¦‰ì‹œ ë°˜í™˜
    Note over A: ì¼ì‹œ ì¤‘ë‹¨
    Loop->>B: 3. ì½”ë£¨í‹´ B ì‹¤í–‰
    B->>OS: await ë§Œë‚¨
    OS-->>B: ì¦‰ì‹œ ë°˜í™˜
    Note over B: ì¼ì‹œ ì¤‘ë‹¨
    OS->>Loop: 4. Aì˜ I/O ì™„ë£Œ!
    Loop->>A: 5. ì½”ë£¨í‹´ A ì¬ê°œ
    Note over A: ê²°ê³¼ ì²˜ë¦¬
```

---

## ì‹¤ì œ ì„±ëŠ¥ ë¹„êµ

```python
import time
import requests
import asyncio
import aiohttp

URLS = ['https://httpbin.org/delay/1'] * 5  # ê° 1ì´ˆ ê±¸ë¦¬ëŠ” ìš”ì²­

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë¸”ë¡œí‚¹ ë°©ì‹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def blocking_requests():
    start = time.time()
    for url in URLS:
        requests.get(url)  # ë¸”ë¡œí‚¹: í•˜ë‚˜ì”© ìˆœì°¨ ì²˜ë¦¬
    print(f"ë¸”ë¡œí‚¹: {time.time() - start:.1f}ì´ˆ")  # ~5ì´ˆ

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ (asyncio)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async def nonblocking_requests():
    start = time.time()
    async with aiohttp.ClientSession() as session:
        tasks = [session.get(url) for url in URLS]
        await asyncio.gather(*tasks)  # ë…¼ë¸”ë¡œí‚¹: ë™ì‹œ ì²˜ë¦¬
    print(f"ë…¼ë¸”ë¡œí‚¹: {time.time() - start:.1f}ì´ˆ")  # ~1ì´ˆ

blocking_requests()
asyncio.run(nonblocking_requests())

```

### ê²°ê³¼ ë¹„êµ

| ë°©ì‹ | ì†Œìš” ì‹œê°„ | ì´ìœ  |
|:---:|:---:|:---|
| ë¸”ë¡œí‚¹ | ~5ì´ˆ | 1ì´ˆ Ã— 5ê°œ ìˆœì°¨ ì‹¤í–‰ |
| ë…¼ë¸”ë¡œí‚¹ | ~1ì´ˆ | 5ê°œ ë™ì‹œ ëŒ€ê¸° (I/O ì‹œê°„ ê²¹ì¹¨) |

### ì‹œê°í™”

```mermaid
gantt
    title ë¸”ë¡œí‚¹ ë°©ì‹ - ì´ 5ì´ˆ
    dateFormat X
    axisFormat %s
    section ìš”ì²­
    ìš”ì²­1 :0, 1
    ìš”ì²­2 :1, 2
    ìš”ì²­3 :2, 3
    ìš”ì²­4 :3, 4
    ìš”ì²­5 :4, 5
```

```mermaid
gantt
    title ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ - ì´ 1ì´ˆ
    dateFormat X
    axisFormat %s
    section ìš”ì²­1
    ìš”ì²­1 :0, 1
    section ìš”ì²­2
    ìš”ì²­2 :0, 1
    section ìš”ì²­3
    ìš”ì²­3 :0, 1
    section ìš”ì²­4
    ìš”ì²­4 :0, 1
    section ìš”ì²­5
    ìš”ì²­5 :0, 1
```

---

## FastAPIì—ì„œì˜ ì ìš©

### ë¸”ë¡œí‚¹ í•¨ìˆ˜ ì‚¬ìš© ì‹œ ì£¼ì˜

```python
from fastapi import FastAPI
import requests  # ë¸”ë¡œí‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬
import httpx     # ë¹„ë™ê¸° ì§€ì› ë¼ì´ë¸ŒëŸ¬ë¦¬

app = FastAPI()

# âŒ ë‚˜ìœ ì˜ˆ: async í•¨ìˆ˜ ë‚´ì—ì„œ ë¸”ë¡œí‚¹ í˜¸ì¶œ
@app.get("/bad")
async def bad_endpoint():
    # requests.get()ì€ ë¸”ë¡œí‚¹ â†’ ì´ë²¤íŠ¸ ë£¨í”„ ì „ì²´ê°€ ë©ˆì¶¤!
    response = requests.get("https://api.example.com/data")
    return response.json()

# âœ… ì¢‹ì€ ì˜ˆ 1: ë¹„ë™ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
@app.get("/good1")
async def good_endpoint_1():
    async with httpx.AsyncClient() as client:
        response = await client.get("https://api.example.com/data")
        return response.json()

# âœ… ì¢‹ì€ ì˜ˆ 2: ë™ê¸° í•¨ìˆ˜ë¡œ ì •ì˜ (FastAPIê°€ ìŠ¤ë ˆë“œí’€ì—ì„œ ì‹¤í–‰)
@app.get("/good2")
def good_endpoint_2():  # async ì—†ìŒ!
    response = requests.get("https://api.example.com/data")
    return response.json()

```

### ì™œ ì´ë ‡ê²Œ ë™ì‘í•˜ëŠ”ê°€?

| ì •ì˜ ë°©ì‹ | ì‹¤í–‰ ìœ„ì¹˜ | ë¸”ë¡œí‚¹ I/O ì˜í–¥ |
|:---:|:---|:---|
| `async def` | ì´ë²¤íŠ¸ ë£¨í”„ (ë©”ì¸ ìŠ¤ë ˆë“œ) | ì „ì²´ ì„œë²„ ë¸”ë¡œí‚¹! |
| `def` | ìŠ¤ë ˆë“œ í’€ (ë³„ë„ ìŠ¤ë ˆë“œ) | í•´ë‹¹ ìŠ¤ë ˆë“œë§Œ ë¸”ë¡œí‚¹ |

---

## í•µì‹¬ ì •ë¦¬

| ê°œë… | ì„¤ëª… |
|:---:|:---|
| **ë¸”ë¡œí‚¹ I/O** | ì‘ì—… ì™„ë£Œê¹Œì§€ í˜¸ì¶œìê°€ ëŒ€ê¸°. ê°„ë‹¨í•˜ì§€ë§Œ ë¹„íš¨ìœ¨ì . |
| **ë…¼ë¸”ë¡œí‚¹ I/O** | ì¦‰ì‹œ ë°˜í™˜. ì™„ë£Œ ì—¬ë¶€ëŠ” ë‚˜ì¤‘ì— í™•ì¸. íš¨ìœ¨ì ì´ì§€ë§Œ ë³µì¡. |
| **I/O ë©€í‹°í”Œë ‰ì‹±** | OSê°€ ì—¬ëŸ¬ I/Oë¥¼ ê°ì‹œí•˜ê³  ì¤€ë¹„ëœ ê²ƒë§Œ ì•Œë ¤ì¤Œ. |
| **asyncio** | ë…¼ë¸”ë¡œí‚¹ I/O + ì´ë²¤íŠ¸ ë£¨í”„ë¡œ íš¨ìœ¨ì ì¸ ë™ì‹œì„± ì œê³µ. |