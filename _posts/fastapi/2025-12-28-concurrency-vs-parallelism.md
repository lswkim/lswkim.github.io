---
title: "[FastAPI ê¸°ì´ˆê°œë… 2] ë™ì‹œì„±(Concurrency) vs ë³‘ë ¬ì„±(Parallelism)"
date: 2025-12-28 09:00:00 +0900
categories: [Tech, FastAPI]
tags: [python, concurrency, parallelism, asyncio, multiprocessing]
mermaid: true
---

> **ğŸ“š FastAPI ì‹œë¦¬ì¦ˆ - Part 1. ê¸°ì´ˆ ê°œë…**
>
> 1. [í”„ë¡œì„¸ìŠ¤ vs ìŠ¤ë ˆë“œ vs ì½”ë£¨í‹´](/posts/process-thread-coroutine/)
> 2. ë™ì‹œì„± vs ë³‘ë ¬ì„± â† í˜„ì¬ ê¸€
> 3. [ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ I/O](/posts/blocking-vs-nonblocking-io/)
> 4. [I/O ë©€í‹°í”Œë ‰ì‹±](/posts/io-multiplexing/)

---

# 2. ë™ì‹œì„±(Concurrency) vs ë³‘ë ¬ì„±(Parallelism)

## ì™œ ì´ êµ¬ë¶„ì´ ì¤‘ìš”í•œê°€?

ì´ ë‘ ê°œë…ì„ í˜¼ë™í•˜ë©´:

- "ë©€í‹°ìŠ¤ë ˆë”© ì¼ëŠ”ë° ì™œ ë¹¨ë¼ì§€ì§€ ì•Šì§€?"
- "async ì¼ëŠ”ë° CPU ì—°ì‚°ì´ ì™œ ëŠë¦¬ì§€?"
- "Pythonì€ ë©€í‹°ì½”ì–´ í™œìš©ì´ ì•ˆ ëœë‹¤ë˜ë°?"

ì´ëŸ° ì˜ë¬¸ì— ë‹µì„ ëª»í•œë‹¤.

---

## í•µì‹¬ ì°¨ì´ (í•œ ì¤„ ì •ì˜)

| êµ¬ë¶„ | ì •ì˜ | ê´€ì  |
|:---:|:---|:---:|
| **ë™ì‹œì„± (Concurrency)** | ì—¬ëŸ¬ ì‘ì—…ì„ "ë‹¤ë£¨ëŠ”" ê²ƒ (dealing with multiple things) | êµ¬ì¡° (Structure) |
| **ë³‘ë ¬ì„± (Parallelism)** | ì—¬ëŸ¬ ì‘ì—…ì„ "ì‹¤í–‰í•˜ëŠ”" ê²ƒ (doing multiple things) | ì‹¤í–‰ (Execution) |

---

## ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°: ì»¤í”¼ìˆ

### ë™ì‹œì„± - ë°”ë¦¬ìŠ¤íƒ€ 1ëª…

```mermaid
graph TB
    subgraph Orders["ì£¼ë¬¸"]
        O1["ì£¼ë¬¸1"]
        O2["ì£¼ë¬¸2"]
        O3["ì£¼ë¬¸3"]
    end
    subgraph Barista["ë°”ë¦¬ìŠ¤íƒ€ 1ëª…"]
        B["ë²ˆê°ˆì•„ê°€ë©° ì²˜ë¦¬"]
    end
    O1 --> B
    O2 --> B
    O3 --> B
```

- ì»¤í”¼ ë‚´ë¦¬ëŠ” ë™ì•ˆ â†’ ë‹¤ë¥¸ ì£¼ë¬¸ ë°›ê¸°
- ìš°ìœ  ë°ìš°ëŠ” ë™ì•ˆ â†’ ì»µ ì¤€ë¹„í•˜ê¸°
- í•œ ë²ˆì— í•˜ë‚˜ë§Œ "ì§ì ‘" í•˜ì§€ë§Œ, ì—¬ëŸ¬ ì£¼ë¬¸ì„ "ê´€ë¦¬"

### ë³‘ë ¬ì„± - ë°”ë¦¬ìŠ¤íƒ€ 4ëª…

```mermaid
graph TB
    subgraph Orders["ì£¼ë¬¸"]
        O1["ì£¼ë¬¸1"]
        O2["ì£¼ë¬¸2"]
        O3["ì£¼ë¬¸3"]
        O4["ì£¼ë¬¸4"]
    end
    O1 --> B1["ë°”ë¦¬ìŠ¤íƒ€1"]
    O2 --> B2["ë°”ë¦¬ìŠ¤íƒ€2"]
    O3 --> B3["ë°”ë¦¬ìŠ¤íƒ€3"]
    O4 --> B4["ë°”ë¦¬ìŠ¤íƒ€4"]
```

- 4ê°œì˜ ì£¼ë¬¸ì´ "ë™ì‹œì—" ì²˜ë¦¬ë¨
- ì‹¤ì œë¡œ ê°™ì€ ìˆœê°„ì— ì—¬ëŸ¬ ì‘ì—…ì´ ì§„í–‰

---

## ì‹œê°ì  ë¹„êµ

### ìˆœì°¨ ì‹¤í–‰ (Sequential)

```mermaid
gantt
    title ìˆœì°¨ ì‹¤í–‰ - í•˜ë‚˜ ëë‚˜ì•¼ ë‹¤ìŒ ì‹œì‘
    dateFormat X
    axisFormat %s
    section CPU 1
    Task A :0, 3
    Task B :3, 6
    Task C :6, 9
```

- í•˜ë‚˜ ëë‚˜ì•¼ ë‹¤ìŒ ì‹œì‘
- ë™ì‹œì„± X, ë³‘ë ¬ì„± X

### ë™ì‹œì„± (Concurrency)

```mermaid
gantt
    title ë™ì‹œì„± - ë²ˆê°ˆì•„ê°€ë©° ì‹¤í–‰ (ì‹œë¶„í• )
    dateFormat X
    axisFormat %s
    section CPU 1
    A :0, 1
    B :1, 2
    A :2, 3
    C :3, 4
    B :4, 5
    C :5, 6
```

- ë²ˆê°ˆì•„ê°€ë©° ì‹¤í–‰ (ì‹œë¶„í• )
- ë™ì‹œì— "ì§„í–‰ ì¤‘"ì¸ ê²ƒì²˜ëŸ¼ ë³´ì„
- ë™ì‹œì„± O, ë³‘ë ¬ì„± X

### ë³‘ë ¬ì„± (Parallelism)

```mermaid
gantt
    title ë³‘ë ¬ì„± - ì‹¤ì œë¡œ ë™ì‹œì— ì‹¤í–‰
    dateFormat X
    axisFormat %s
    section CPU 1
    Task A :0, 3
    section CPU 2
    Task B :0, 3
    section CPU 3
    Task C :0, 3
```

- ì‹¤ì œë¡œ ë™ì‹œì— ì‹¤í–‰
- ë¬¼ë¦¬ì ìœ¼ë¡œ ì—¬ëŸ¬ ì½”ì–´ ì‚¬ìš©
- ë™ì‹œì„± O, ë³‘ë ¬ì„± O

---

## ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì˜ ì¡°í•©

|  | ë³‘ë ¬ì„± ì—†ìŒ | ë³‘ë ¬ì„± ìˆìŒ |
|:---:|:---:|:---:|
| **ë™ì‹œì„± ì—†ìŒ** | ìˆœì°¨ ì‹¤í–‰ (A â†’ B â†’ C) | (ë¶ˆê°€ëŠ¥) |
| **ë™ì‹œì„± ìˆìŒ** | ì½”ë£¨í‹´, ë‹¨ì¼ ìŠ¤ë ˆë“œ (Aâ†”Bâ†”C ë²ˆê°ˆì•„) | ë©€í‹°ìŠ¤ë ˆë“œ, ë©€í‹°í”„ë¡œì„¸ìŠ¤ (A,B,C ë™ì‹œì—) |

---

## Pythonì—ì„œì˜ êµ¬í˜„

### ë™ì‹œì„±ë§Œ (ë³‘ë ¬ì„± X)

```python
import asyncio
import time

async def task(name, delay):
    print(f"[{time.strftime('%X')}] {name} ì‹œì‘")
    await asyncio.sleep(delay)  # I/O ëŒ€ê¸° ì‹œë®¬ë ˆì´ì…˜
    print(f"[{time.strftime('%X')}] {name} ì™„ë£Œ")
    return name

async def main():
    start = time.time()

    # 3ê°œ íƒœìŠ¤í¬ë¥¼ ë™ì‹œì— ì‹¤í–‰ (í•˜ì§€ë§Œ ë‹¨ì¼ ìŠ¤ë ˆë“œ)
    results = await asyncio.gather(
        task("A", 2),
        task("B", 2),
        task("C", 2),
    )

    print(f"ì´ ì†Œìš”ì‹œê°„: {time.time() - start:.1f}ì´ˆ")
    # ì¶œë ¥: ì´ ì†Œìš”ì‹œê°„: 2.0ì´ˆ (6ì´ˆ ì•„ë‹˜!)

asyncio.run(main())

```

**ì¶œë ¥:**

```
[10:00:00] A ì‹œì‘
[10:00:00] B ì‹œì‘
[10:00:00] C ì‹œì‘
[10:00:02] A ì™„ë£Œ
[10:00:02] B ì™„ë£Œ
[10:00:02] C ì™„ë£Œ
ì´ ì†Œìš”ì‹œê°„: 2.0ì´ˆ

```

**ë¶„ì„:**

| ì‹œê°„ | Task A | Task B | Task C |
|:---:|:---:|:---:|:---:|
| 0s | ì‹œì‘ | ì‹œì‘ | ì‹œì‘ |
| 0s~2s | ëŒ€ê¸°ì¤‘... | ëŒ€ê¸°ì¤‘... | ëŒ€ê¸°ì¤‘... |
| 2s | ì™„ë£Œ | ì™„ë£Œ | ì™„ë£Œ |
- I/O ëŒ€ê¸° ì‹œê°„ì´ ê²¹ì³ì„œ ì´ 2ì´ˆë§Œ ì†Œìš”
- ë™ì‹œì„± O, ë³‘ë ¬ì„± X

### ë³‘ë ¬ì„± ìˆìŒ (ë©€í‹°í”„ë¡œì„¸ìŠ¤)

```python
import multiprocessing
import time

def cpu_task(name):
    print(f"[{time.strftime('%X')}] {name} ì‹œì‘ (PID: {multiprocessing.current_process().pid})")

    # CPU ì§‘ì•½ì  ì‘ì—…
    result = sum(i * i for i in range(10_000_000))

    print(f"[{time.strftime('%X')}] {name} ì™„ë£Œ")
    return result

if __name__ == "__main__":
    start = time.time()

    # 4ê°œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë³‘ë ¬ ì‹¤í–‰
    with multiprocessing.Pool(4) as pool:
        results = pool.map(cpu_task, ["A", "B", "C", "D"])

    print(f"ì´ ì†Œìš”ì‹œê°„: {time.time() - start:.1f}ì´ˆ")

```

**4ì½”ì–´ CPUì—ì„œ ì‹¤í–‰ ê²°ê³¼:**

```
[10:00:00] A ì‹œì‘ (PID: 1234)
[10:00:00] B ì‹œì‘ (PID: 1235)
[10:00:00] C ì‹œì‘ (PID: 1236)
[10:00:00] D ì‹œì‘ (PID: 1237)
[10:00:01] A ì™„ë£Œ
[10:00:01] B ì™„ë£Œ
[10:00:01] C ì™„ë£Œ
[10:00:01] D ì™„ë£Œ
ì´ ì†Œìš”ì‹œê°„: 1.2ì´ˆ  (ìˆœì°¨ ì‹¤í–‰ ì‹œ 4.8ì´ˆ)

```

**ë¶„ì„:**

| Core | Process | ìƒíƒœ |
|:---:|:---:|:---:|
| Core 1 | Process A | ë™ì‹œ ì‹¤í–‰ |
| Core 2 | Process B | ë™ì‹œ ì‹¤í–‰ |
| Core 3 | Process C | ë™ì‹œ ì‹¤í–‰ |
| Core 4 | Process D | ë™ì‹œ ì‹¤í–‰ |
- ì‹¤ì œë¡œ ë™ì‹œì— ì‹¤í–‰ë¨
- ë™ì‹œì„± O, ë³‘ë ¬ì„± O

---

## I/O ë°”ìš´ë“œ vs CPU ë°”ìš´ë“œ

### I/O ë°”ìš´ë“œ ì‘ì—…

| í•­ëª© | ë‚´ìš© |
|:---:|:---|
| **íŠ¹ì§•** | ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ëŒ€ê¸°ì— ì‚¬ìš© |
| **ì˜ˆì‹œ** | DB ì¿¼ë¦¬, API í˜¸ì¶œ, íŒŒì¼ ì½ê¸°, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ |
| **CPU ì‚¬ìš© íŒ¨í„´** | ì‹¤í–‰-ëŒ€ê¸°-ì‹¤í–‰-ëŒ€ê¸° (ëŒ€ë¶€ë¶„ ëŒ€ê¸°) |
| **ìµœì  ì „ëµ** | ë™ì‹œì„± (async/await, ì½”ë£¨í‹´) |
| **ì´ìœ ** | ëŒ€ê¸° ì‹œê°„ì— ë‹¤ë¥¸ ì‘ì—… ì²˜ë¦¬ ê°€ëŠ¥ |

### CPU ë°”ìš´ë“œ ì‘ì—…

| í•­ëª© | ë‚´ìš© |
|:---:|:---|
| **íŠ¹ì§•** | ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ì—°ì‚°ì— ì‚¬ìš© |
| **ì˜ˆì‹œ** | ì´ë¯¸ì§€ ì²˜ë¦¬, ì•”í˜¸í™”, ML ì¶”ë¡ , ê³¼í•™ ê³„ì‚° |
| **CPU ì‚¬ìš© íŒ¨í„´** | 100% CPU ì‚¬ìš© (ì‰¬ëŠ” ì‹œê°„ ì—†ìŒ) |
| **ìµœì  ì „ëµ** | ë³‘ë ¬ì„± (ë©€í‹°í”„ë¡œì„¸ì‹±) |
| **ì´ìœ ** | ì—¬ëŸ¬ ì½”ì–´ë¥¼ ë™ì‹œì— í™œìš©í•´ì•¼ ë¹¨ë¼ì§ |

---

## Pythonì˜ í•œê³„: GIL

### ê¸°ëŒ€ vs í˜„ì‹¤

**ê¸°ëŒ€í•˜ëŠ” ê²ƒ:**

| Core | Thread | ìƒíƒœ |
|:---:|:---:|:---:|
| Core 1 | Thread 1 | ë³‘ë ¬ ì‹¤í–‰ |
| Core 2 | Thread 2 | ë³‘ë ¬ ì‹¤í–‰ |
| Core 3 | Thread 3 | ë³‘ë ¬ ì‹¤í–‰ |
| Core 4 | Thread 4 | ë³‘ë ¬ ì‹¤í–‰ |

â†’ 4ë°° ë¹¨ë¼ì§€ê² ì§€?

**ì‹¤ì œ (CPU ë°”ìš´ë“œ ì‘ì—…):**

```mermaid
gantt
    title GILë¡œ ì¸í•œ ìŠ¤ë ˆë“œ ë²ˆê°ˆì•„ ì‹¤í–‰
    dateFormat X
    axisFormat %s
    section Core 1
    Thread1 (GIL) :0, 2
    Thread1 (GIL) :4, 6
    Thread1 (GIL) :8, 10
    section Core 2
    Thread2 (GIL) :2, 4
    Thread2 (GIL) :6, 8
```

| ë¬¸ì œì  | ì„¤ëª… |
|:---:|:---|
| ìˆœì°¨ ì‹¤í–‰ | í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ Python ì½”ë“œ ì‹¤í–‰ |
| ì˜¤ë²„í—¤ë“œ | ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ì˜¤ë²„í—¤ë“œë§Œ ì¶”ê°€ë¨ |
| ì„±ëŠ¥ ì €í•˜ | ì˜¤íˆë ¤ ë‹¨ì¼ ìŠ¤ë ˆë“œë³´ë‹¤ ëŠë¦´ ìˆ˜ ìˆìŒ! |

---

## ì‘ì—… ìœ í˜•ë³„ Python ì„ íƒ ê°€ì´ë“œ

| ì‘ì—… ìœ í˜• | ë°©ë²• | ë„êµ¬ | íš¨ê³¼ |
|:---:|:---:|:---|:---:|
| I/O ë°”ìš´ë“œ (ëŒ€ê¸° å¤š) | ë¹„ë™ê¸° (ì½”ë£¨í‹´) | asyncio, aiohttp, FastAPI | ìµœì  |
| I/O ë°”ìš´ë“œ (ë ˆê±°ì‹œ) | ë©€í‹°ìŠ¤ë ˆë”© | threading, ThreadPoolExecutor | ì–‘í˜¸ |
| CPU ë°”ìš´ë“œ (ì—°ì‚° å¤š) | ë©€í‹°í”„ë¡œì„¸ì‹± | multiprocessing, ProcessPoolExecutor, joblib | ìµœì  |
| CPU ë°”ìš´ë“œ (ìˆ˜ì¹˜ ì—°ì‚°) | C í™•ì¥ ì‚¬ìš© (GIL í•´ì œ) | NumPy, Pandas, Cython | ìµœì  |

---

## FastAPIì—ì„œì˜ ì ìš©

```python
from fastapi import FastAPI
from concurrent.futures import ProcessPoolExecutor, ThreadPoolExecutor
import asyncio
import httpx

app = FastAPI()

# í”„ë¡œì„¸ìŠ¤ í’€ (CPU ë°”ìš´ë“œìš©)
process_pool = ProcessPoolExecutor(max_workers=4)

# ìŠ¤ë ˆë“œ í’€ (ë™ê¸° I/O ë¼ì´ë¸ŒëŸ¬ë¦¬ìš©)
thread_pool = ThreadPoolExecutor(max_workers=10)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Case 1: I/O ë°”ìš´ë“œ - ë¹„ë™ê¸° (ìµœì )
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
@app.get("/io-async")
async def io_async():
    async with httpx.AsyncClient() as client:
        # ì—¬ëŸ¬ API ë™ì‹œ í˜¸ì¶œ (ë™ì‹œì„±)
        responses = await asyncio.gather(
            client.get("https://api.example.com/1"),
            client.get("https://api.example.com/2"),
            client.get("https://api.example.com/3"),
        )
    return {"status": "done"}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Case 2: I/O ë°”ìš´ë“œ - ë™ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì‹œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import requests  # ë™ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬

def sync_api_call(url):
    return requests.get(url).json()

@app.get("/io-sync")
async def io_sync():
    loop = asyncio.get_event_loop()
    # ìŠ¤ë ˆë“œí’€ì—ì„œ ì‹¤í–‰ (ì´ë²¤íŠ¸ ë£¨í”„ ë¸”ë¡œí‚¹ ë°©ì§€)
    result = await loop.run_in_executor(
        thread_pool,
        sync_api_call,
        "https://api.example.com/data"
    )
    return result

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Case 3: CPU ë°”ìš´ë“œ - í”„ë¡œì„¸ìŠ¤ í’€ (ë³‘ë ¬ì„±)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def heavy_computation(data):
    # CPU ì§‘ì•½ì  ì‘ì—… (ì˜ˆ: ì´ë¯¸ì§€ ì²˜ë¦¬, ML ì¶”ë¡ )
    result = sum(i * i for i in range(10_000_000))
    return result

@app.get("/cpu-bound")
async def cpu_bound():
    loop = asyncio.get_event_loop()
    # ë³„ë„ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‹¤í–‰ (GIL ìš°íšŒ)
    result = await loop.run_in_executor(
        process_pool,
        heavy_computation,
        "input_data"
    )
    return {"result": result}

```

---

## ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì„ íƒ

| ì‹œë‚˜ë¦¬ì˜¤ | ìµœì  ì„ íƒ | ì´ìœ  |
|:---|:---|:---|
| ì™¸ë¶€ API ì—¬ëŸ¬ ê°œ í˜¸ì¶œí•´ì„œ ê²°ê³¼ í•©ì¹˜ê¸° | `asyncio.gather()` + `aiohttp` | ë™ì‹œì„±ìœ¼ë¡œ ì¶©ë¶„, ë³‘ë ¬ì„± ë¶ˆí•„ìš” |
| ì´ë¯¸ì§€ 100ì¥ ë¦¬ì‚¬ì´ì¦ˆ | `multiprocessing.Pool` | CPU ë°”ìš´ë“œì´ë¯€ë¡œ ë³‘ë ¬ì„± í•„ìš” |
| DBì—ì„œ ì½ê³  â†’ ê°€ê³µ â†’ ì €ì¥ | ì½ê¸°/ì €ì¥: async, ê°€ê³µ: ProcessPool | í˜¼í•© ì „ëµ í•„ìš” |
| ì›¹ í¬ë¡¤ë§ 1000í˜ì´ì§€ ìˆ˜ì§‘ | `aiohttp` + `asyncio` | I/O ë°”ìš´ë“œ, ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ ìˆ˜ì²œ ê°œ ë™ì‹œ ìš”ì²­ ê°€ëŠ¥ |
| ML ëª¨ë¸ ì¶”ë¡  ì„œë²„ | API: FastAPI (async), ì¶”ë¡ : ProcessPool ë˜ëŠ” Triton | ì—­í•  ë¶„ë¦¬ |

---

## ì„±ëŠ¥ ë¹„êµ ì‹¤í—˜

```python
import asyncio
import time
from concurrent.futures import ProcessPoolExecutor, ThreadPoolExecutor

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# I/O ë°”ìš´ë“œ ì‘ì—… ë¹„êµ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

async def io_bound_async():
    """ë¹„ë™ê¸° ë°©ì‹"""
    await asyncio.sleep(1)
    return "done"

def io_bound_sync():
    """ë™ê¸° ë°©ì‹"""
    time.sleep(1)
    return "done"

async def test_io_bound():
    # ë¹„ë™ê¸°: 10ê°œ ë™ì‹œ ì‹¤í–‰
    start = time.time()
    await asyncio.gather(*[io_bound_async() for _ in range(10)])
    print(f"ë¹„ë™ê¸° I/O: {time.time() - start:.1f}ì´ˆ")  # ~1ì´ˆ

    # ìŠ¤ë ˆë“œ: 10ê°œ ë™ì‹œ ì‹¤í–‰
    start = time.time()
    with ThreadPoolExecutor(10) as pool:
        list(pool.map(io_bound_sync, range(10)))
    print(f"ìŠ¤ë ˆë“œ I/O: {time.time() - start:.1f}ì´ˆ")  # ~1ì´ˆ

    # ìˆœì°¨: 10ê°œ ìˆœì°¨ ì‹¤í–‰
    start = time.time()
    for _ in range(10):
        io_bound_sync()
    print(f"ìˆœì°¨ I/O: {time.time() - start:.1f}ì´ˆ")  # ~10ì´ˆ

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# CPU ë°”ìš´ë“œ ì‘ì—… ë¹„êµ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def cpu_bound():
    """CPU ì§‘ì•½ì  ì‘ì—…"""
    return sum(i * i for i in range(5_000_000))

async def test_cpu_bound():
    # í”„ë¡œì„¸ìŠ¤: 4ê°œ ë³‘ë ¬ ì‹¤í–‰
    start = time.time()
    with ProcessPoolExecutor(4) as pool:
        list(pool.map(cpu_bound, range(4)))
    print(f"í”„ë¡œì„¸ìŠ¤ CPU: {time.time() - start:.1f}ì´ˆ")  # ~0.5ì´ˆ

    # ìŠ¤ë ˆë“œ: 4ê°œ (GIL ë•Œë¬¸ì— íš¨ê³¼ ì—†ìŒ)
    start = time.time()
    with ThreadPoolExecutor(4) as pool:
        list(pool.map(cpu_bound, range(4)))
    print(f"ìŠ¤ë ˆë“œ CPU: {time.time() - start:.1f}ì´ˆ")  # ~2ì´ˆ (ë” ëŠë¦¼!)

    # ìˆœì°¨: 4ê°œ ìˆœì°¨ ì‹¤í–‰
    start = time.time()
    for _ in range(4):
        cpu_bound()
    print(f"ìˆœì°¨ CPU: {time.time() - start:.1f}ì´ˆ")  # ~2ì´ˆ

# ì‹¤í–‰
asyncio.run(test_io_bound())
asyncio.run(test_cpu_bound())

```

**ì˜ˆìƒ ê²°ê³¼:**

| ë°©ì‹ | I/O ë°”ìš´ë“œ (10ê°œ) | CPU ë°”ìš´ë“œ (4ê°œ) |
|:---:|:---:|:---:|
| ë¹„ë™ê¸°/í”„ë¡œì„¸ìŠ¤ | 1.0ì´ˆ (ìµœì ) | 0.5ì´ˆ (ìµœì ) |
| ìŠ¤ë ˆë“œ | 1.0ì´ˆ | 2.5ì´ˆ (GIL ì˜í–¥) |
| ìˆœì°¨ | 10.0ì´ˆ | 2.0ì´ˆ |

---

## í•µì‹¬ ì •ë¦¬

| ê°œë… | í•µì‹¬ |
|:---:|:---|
| **ë™ì‹œì„± (Concurrency)** | ì—¬ëŸ¬ ì‘ì—…ì„ "ë²ˆê°ˆì•„ê°€ë©°" ì²˜ë¦¬. í•˜ë‚˜ì˜ ì‹¤í–‰ íë¦„ì´ ì—¬ëŸ¬ ì‘ì—…ì„ ê´€ë¦¬. I/O ëŒ€ê¸° ì‹œê°„ì„ í™œìš©. |
| **ë³‘ë ¬ì„± (Parallelism)** | ì—¬ëŸ¬ ì‘ì—…ì„ "ë™ì‹œì—" ì‹¤í–‰. ì—¬ëŸ¬ ì‹¤í–‰ íë¦„ì´ ê°ì ì‘ì—… ì²˜ë¦¬. ì—¬ëŸ¬ CPU ì½”ì–´ë¥¼ í™œìš©. |
| **I/O ë°”ìš´ë“œ** | ë™ì‹œì„±ì´ íš¨ê³¼ì  (async/await). ëŒ€ê¸° ì‹œê°„ì— ë‹¤ë¥¸ ì‘ì—… ì²˜ë¦¬. |
| **CPU ë°”ìš´ë“œ** | ë³‘ë ¬ì„±ì´ í•„ìš” (multiprocessing). Python GIL ìš°íšŒ í•„ìˆ˜. |

---

## ì¶”ê°€ ë‚´ìš©

## CPU ì½”ì–´ìˆ˜ì— ë”°ë¥¸ í”„ë¡œì„¸ìŠ¤ ìˆ˜

- í”„ë¡œì„¸ìŠ¤ â‰  CPU ì½”ì–´

| êµ¬ë¶„ | í”„ë¡œì„¸ìŠ¤ (Process) | CPU ì½”ì–´ (Core) |
|:---:|:---:|:---:|
| **ë³¸ì§ˆ** | ì†Œí”„íŠ¸ì›¨ì–´ (ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨) | í•˜ë“œì›¨ì–´ (ë¬¼ë¦¬ì  ì—°ì‚° ì¥ì¹˜) |
| **ê°œìˆ˜** | ì›í•˜ëŠ” ë§Œí¼ ìƒì„± ê°€ëŠ¥ | ê³ ì • (ì˜ˆ: 4ì½”ì–´, 8ì½”ì–´) |
| **ê´€ë¦¬ ì£¼ì²´** | OSê°€ ìƒì„±/ì¢…ë£Œ | CPU ì œì¡°ì‚¬ê°€ ê²°ì • |

### ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤

**í”„ë¡œì„¸ìŠ¤ ìˆ˜ < ì½”ì–´ ìˆ˜**

```mermaid
gantt
    title 4ì½”ì–´ CPU, 2ê°œ í”„ë¡œì„¸ìŠ¤ â†’ ì½”ì–´ê°€ ë‚¨ìŒ (ë¹„íš¨ìœ¨)
    dateFormat X
    axisFormat %s
    section Core 1
    P1 :0, 4
    section Core 2
    P2 :0, 4
    section Core 3
    (idle) :0, 0
    section Core 4
    (idle) :0, 0
```

**í”„ë¡œì„¸ìŠ¤ ìˆ˜ = ì½”ì–´ ìˆ˜ (ì´ìƒì )**

```mermaid
gantt
    title 4ì½”ì–´ CPU, 4ê°œ í”„ë¡œì„¸ìŠ¤ â†’ ëª¨ë“  ì½”ì–´ í™œìš© (ìµœì )
    dateFormat X
    axisFormat %s
    section Core 1
    P1 :0, 4
    section Core 2
    P2 :0, 4
    section Core 3
    P3 :0, 4
    section Core 4
    P4 :0, 4
```

**í”„ë¡œì„¸ìŠ¤ ìˆ˜ > ì½”ì–´ ìˆ˜**

```mermaid
gantt
    title 4ì½”ì–´ CPU, 8ê°œ í”„ë¡œì„¸ìŠ¤ â†’ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ (ì˜¤ë²„í—¤ë“œ)
    dateFormat X
    axisFormat %s
    section Core 1
    P1 :0, 1
    P5 :1, 2
    P1 :2, 3
    P5 :3, 4
    section Core 2
    P2 :0, 1
    P6 :1, 2
    P2 :2, 3
    P6 :3, 4
    section Core 3
    P3 :0, 1
    P7 :1, 2
    P3 :2, 3
    P7 :3, 4
    section Core 4
    P4 :0, 1
    P8 :1, 2
    P4 :2, 3
    P8 :3, 4
```

---

### OS ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ì—­í• 

| ì—­í•  | ì„¤ëª… |
|:---:|:---|
| **í• ë‹¹** | ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì–´ë–¤ ì½”ì–´ì—ì„œ ì‹¤í–‰í• ì§€ ê²°ì • |
| **ì‹œë¶„í• ** | í”„ë¡œì„¸ìŠ¤ê°€ ì½”ì–´ë³´ë‹¤ ë§ìœ¼ë©´ ë²ˆê°ˆì•„ ì‹¤í–‰ |
| **ë¡œë“œ ë°¸ëŸ°ì‹±** | ì½”ì–´ ê°„ ì‘ì—…ëŸ‰ ê· ë“± ë¶„ë°° |
| **ìš°ì„ ìˆœìœ„** | ì¤‘ìš”í•œ í”„ë¡œì„¸ìŠ¤ ë¨¼ì € ì‹¤í–‰ |